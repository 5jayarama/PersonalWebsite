<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Personal Website</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="main-container">
        <div class="tabs-container">
            <a href="#" class="tab" data-page="Home">Home</a>
            <a href="#" class="tab" data-page="About Me">About Me</a>
            <a href="#" class="tab" data-page="Skills">Skills</a>
            <a href="#" class="tab" data-page="Projects">Projects</a>
            <a href="#" class="tab" data-page="Contact Me">Contact Me</a>
        </div>
        <div class="title-box">
            <span id="pageTitle">Home</span>
            <div id="themeToggle" class="theme-toggle"></div>
        </div>

        <div class="content-area">
            <div id="homeContent">
                <div class="home-hero">
                    <h1 class="hero-name">Adarsh Jayaram</h1>
                    <p class="hero-title">Recent Computer Science Graduate<br>from Northeastern University</p>
                    
                    <div class="home-social-links">
                        <a href="https://github.com/5jayarama" class="home-social-link" target="_blank">
                            <img src="https://cdn-icons-png.flaticon.com/512/25/25231.png" alt="GitHub" class="home-social-icon">
                            <span class="home-social-label">GitHub</span>
                        </a>
                        
                        <a href="https://linkedin.com/in/adarshjayaram" class="home-social-link" target="_blank">
                            <img src="https://cdn-icons-png.flaticon.com/512/174/174857.png" alt="LinkedIn" class="home-social-icon">
                            <span class="home-social-label">LinkedIn</span>
                        </a>
                        
                        <a href="mailto:adarshjedi@gmail.com" class="home-social-link">
                            <img src="https://cdn-icons-png.flaticon.com/512/561/561127.png" alt="Email" class="home-social-icon">
                            <span class="home-social-label">Email</span>
                        </a>

                        <a href="static/AdarshJayaramResume.pdf" class="home-social-link" target="_blank">
                            <img src="https://cdn-icons-png.flaticon.com/512/3580/3580085.png" alt="Resume" class="home-social-icon">
                            <span class="home-social-label">Resume</span>
                        </a>
                    </div>
                </div>
                
                <div class="home-bottom-message">
                    Check out my projects, skills, and about section to learn more!
                </div>
            </div>
            
            <div id="aboutContent" class="hidden">
                <div class="about-container">
                    <div class="about-photo">
                        <img src="static/SelfProfessionalPicture.jpg" alt="Adarsh Jayaram" class="profile-image">
                    </div>
                    <div class="about-text">
                        <div class="about-description">
                            Hi, my name is Adarsh Jayaram and I am a recent graduate from Northeastern University with a B.S. in Computer Science. I am currently searching for opportunities to leverage my freshly built software skills. I want to solve real-world problems and to gain real world hands-on experience by working in the professional environment.
                            
                            <br><br>During my time at Northeastern, I aquired noteworthy skills through various projects, coursework, and an internship at GhangorCloud. By leveraging my comprehensive foundation in the field, I hope deliver meaningful results in the workplace. While my expertise is mainly in networks, systems, and full stack development, I am open to expanding my repertoire by taking on other opportunities.
                            
                            <br><br>I am currrently looking for opportunities where I can contribute to impactful products so that I can continue growing as a developer. I am most looking forward to working and learning alongside other creative and intelligent developers during this process. I prefer to work in-person in small teams, as I find myself more hardworking and capable of absorbing knowledge under this environment.
                            
                            <br><br>I have an interest in emerging scientific and technological developments even outside coding. I enjoy spending some of my free time reading about the latest technologies and general news on Wall Street Journal or other interesting sites. I am intrigued by the impact of these technologies on both the lives of everyday people and on the general economy.
                        </div>
                        
                        <div class="contact-info">
                            <div class="contact-item">
                                <strong>Full Name:</strong> Adarsh Jayaram
                            </div>
                            <div class="contact-item">
                                <strong>Email:</strong> adarshjedi@gmail.com
                            </div>
                            <div class="contact-item">
                                <strong>Resume:</strong> <a href="static/AdarshJayaramResume.pdf" target="_blank">Download Resume</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="skillsContent" class="hidden">
                <div class="skills-description">
                    My recent expertise has been in networks, systems, and full stack development. I first learned programming by doing general Java projects in the earlier half of my college years and shifted into python programming for the later half for flashier personal projects and its ease of use for navigating more complex programming tasks in networks and distributed systems. I learned full stack development from project based coursework and applied it during my time at the Northeastern Electric Racing Club, where I contributed to the club's website. 
                    
                    <br><br>I have my skills listed below; the meters are more of a measure of how much time I spent with each language. The projects and the descriptions under each skill tell more of the story.
                </div>
                
                <div class="skills-section">
                    <div class="section-title">LANGUAGES</div>
                    
                    <div class="skill-item" data-skill="python">
                        <div class="skill-header">
                            <div class="skill-name">PYTHON</div>
                            <div class="skill-percentage" style="left: 65%;">65%</div>
                        </div>
                        <div class="skill-bar">
                            <div class="skill-progress" style="width: 65%"></div>
                        </div>
                        <div class="projects-list">
                            <div class="skill-description">I developed my Python expertise through academic and personal projects on various topics from data analysis to cybersecurity. When I make a project I usually choose to do it in python, because python has so many tools and libaries which make coding much easier and more efficient. I have plenty of python projects, so feel free to look into them - I think I coded them quite well. Many fields nowadays are dominated by python, including data anaylsis, machine learning, and cybersecurity. </div>
                            <div class="github-projects-container" data-language="Python"></div>
                        </div>
                    </div>
                    
                    <div class="skill-item" data-skill="typescript">
                        <div class="skill-header">
                            <div class="skill-name">TYPESCRIPT/JAVASCRIPT</div>
                            <div class="skill-percentage" style="left: 55%;">55%</div>
                        </div>
                        <div class="skill-bar">
                            <div class="skill-progress" style="width: 55%"></div>
                        </div>
                        <div class="projects-list">
                            <div class="skill-description">I learned typescript during two project based classes and during my time at the Northeastern Electric Racing club. Both of the projects were full stack, meaning I managed a database backend in tandem with the typescript frontend. In the club I did only tyepscript and others managed the backend.</div>
                            <div class="github-projects-container" data-language="JavaScript"></div>
                            <div class="github-projects-container" data-language="TypeScript"></div>
                        </div>
                    </div>
                    
                    <div class="skill-item" data-skill="java">
                        <div class="skill-header">
                            <div class="skill-name">JAVA</div>
                            <div class="skill-percentage" style="left: 50%;">50%</div>
                        </div>
                        <div class="skill-bar">
                            <div class="skill-progress" style="width: 50%"></div>
                        </div>
                        <div class="projects-list">
                            <div class="skill-description">Java was one of my foundational programming languages: it was the first major language that I learned during college. I studied Java knowledge under the context of data structures, algorithms, object oriented programming, and building elegant backend systems. The marble solitaire and the image processor are the biggest projects that I made for Java.</div>
                            <div class="github-projects-container" data-language="Java"></div>
                        </div>
                    </div>

                    <div class="skill-item" data-skill="mysql">
                        <div class="skill-header">
                            <div class="skill-name">MySQL</div>
                            <div class="skill-percentage" style="left: 35%;">35%</div>
                        </div>
                        <div class="skill-bar">
                            <div class="skill-progress" style="width: 35%"></div>
                        </div>
                        <div class="projects-list">
                            <div class="skill-description">I have used MySQL in three instances: During database management for testing during my internship at GhangorCloud, during an introductory cybersecurity class where I learned how to secure data in SQL databases, and one where I did a full stack project where the data was stored in a MySQL backend. I understand the basics of the schemas along with making and securing the databases.</div>
                            <div class="github-projects-container" data-language="SQL"></div>
                        </div>
                    </div>
                    
                    <div class="skill-item" data-skill="cpp">
                        <div class="skill-header">
                            <div class="skill-name">C++</div>
                            <div class="skill-percentage" style="left: 30%;">30%</div>
                        </div>
                        <div class="skill-bar">
                            <div class="skill-progress" style="width: 30%"></div>
                        </div>
                        <div class="projects-list">
                            <div class="skill-description">I learned C++ during two of my college classes where I worked on backend related projects. As a lower level language C++ has the programmer manually manage more computational resources, such as memory allocation, while python and java manage the automatically. It's a trade-off for more performance, but as a junior programmer I almost always prefer to do my projects - both personal and for school - in python. I can finish the projects faster, debug them faster, and then make some adjustments for more performance. In some industries the extra hassle of a lower level language is worth it, because performance is pivotal, so I am open learn more about C++. But as of now that is not were my expertise lies.  </div>
                            <div class="manual-project-item" data-project="predator-prey">• Predator-Prey Simulation using ncurses library</div>
                            <div class="manual-project-item" data-project="snake-game">• Snake Game using linked lists</div>
                            <div class="github-projects-container" data-language="C++"></div>
                        </div>
                    </div>

                    <div class="skill-item" data-skill="kotlin">
                        <div class="skill-header">
                            <div class="skill-name">KOTLIN</div>
                            <div class="skill-percentage" style="left: 30%;">30%</div>
                        </div>
                        <div class="skill-bar">
                            <div class="skill-progress" style="width: 30%"></div>
                        </div>
                        <div class="projects-list">
                            <div class="skill-description">I used Kotlin during my GhangorCloud internship where I modified a keycloak extension to fit company needs. It is a bit similar to java - both are object oriented languages - so I was able to grasp the extra gimmicks of kotlin enough to complete this company task.</div>
                            <div class="manual-project-item" data-project="keycloak-extension">• Modified Keycloak Extension</div>
                            <div class="github-projects-container" data-language="Kotlin"></div>
                        </div>
                    </div>
                </div>
                
                <div class="skills-section">
                    <div class="section-title">PLATFORMS & TOOLS</div>
                    
                    <div class="skill-item" data-skill="git">
                        <div class="skill-header">
                            <div class="skill-name">GIT</div>
                        </div>
                        <div class="projects-list">
                            <div class="skill-description">Git has been a crucial part of my development workflow since my second year at college. I have used github for various class projects - both partnered and solo. I have also been exposed to Github in a larger setting in the NER club, where I have done pull requests and formal code merging. Finally I have used Github to browse other projects. For instance, the keycloak extension that I made during my internship was a modified version of an open source project on github.</div>
                            <div class="github-projects-container" data-language="Git"></div>
                        </div>
                    </div>

                    <div class="skill-item" data-skill="vscode">
                        <div class="skill-header">
                            <div class="skill-name">VS CODE</div>
                        </div>
                        <div class="projects-list">
                            <div class="skill-description">VS Code became my primary and favorite IDE due to its convenience and ease of use. It has a vast library of extensions and compatibility with any language, which makes it both powerful and reliable. Every developer has their own preferred plaform that they feel allows them to write better code, and I prefer to use this one before I migrate it to the official plaform.</div>
                            <div class="github-projects-container" data-language="VS Code"></div>
                        </div>
                    </div>
                    
                    <div class="skill-item" data-skill="docker">
                        <div class="skill-header">
                            <div class="skill-name">DOCKER</div>
                        </div>
                        <div class="projects-list">
                            <div class="skill-description">I used docker in my internship at GhangorCloud, at the NER club, and during two of my classes. It is a great tool - containerization is invaluable for software deployment - and since I have used it I am not mostly capable of navigating the finnicky aspects of docker.</div>
                            <div class="github-projects-container" data-language="Dockerfile"></div>
                        </div>
                    </div>

                    <div class="skill-item" data-skill="vim">
                        <div class="skill-header">
                            <div class="skill-name">VIM/BASH</div>
                        </div>
                        <div class="projects-list">
                            <div class="skill-description">I have used text editors and terminals in many of my more systems related coursework at my university. I learned the basic scripting commands so that I can effectively traverse and search files and file contents within the terminal environment.</div>
                            <div class="github-projects-container" data-language="Vim script"></div>
                        </div>
                    </div>

                    <div class="skill-item" data-skill="linux">
                        <div class="skill-header">
                            <div class="skill-name">UBUNTU & RED HAT LINUX</div>
                        </div>
                        <div class="projects-list">
                            <div class="skill-description">I have used Ubuntu Linux for quite a few backend heavy coursework and during my internship at GhangorCloud. I ran Ubuntu on a virtual machine for my classes - where I compeleted various assignments and projects - and I used a Linux computer at my internship. I have also touched on Red Hat Linux for some setups, package installs, and other basic tasks</div>
                            <div class="github-projects-container" data-language="Shell"></div>
                        </div>
                    </div>

                    <div class="skill-item" data-skill="mongodb">
                        <div class="skill-header">
                            <div class="skill-name">MONGODB</div>
                        </div>
                        <div class="projects-list">
                            <div class="skill-description">I created a website for a class using a schema based backend, and then I converted it to use MongoDB instead. I found it easy to use after I learned how to set it up, as all that needs to be done is insert the data the right way.</div>
                            <div class="github-projects-container" data-language="MongoDB"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="projectsContent" class="hidden">
                <div class="projects-description">
                    Here is a fetched list of all my public repos from github. Each project has a commit graph updated every hour. The github data and graphs are fetched in the background as soon as you enter the site to eliminate any delay.
                    
                    <br><br>To see each project listed under the respective skill check out the skills page, and for more information on the projects feel free to click on the links to my github.
                </div>
                
                <div class="chart-container">
                    <div id="repoTabsContainer">
                        <div class="loading-message">Loading repositories...</div>
                    </div>
                    
                    <div id="selectedProjectInfo" style="display: none;">
                        <div class="project-chart-info">
                            <div class="project-details">
                                <div id="projectName" class="project-name"></div>
                                <div id="projectDescription" class="project-description"></div>
                                <div id="projectStats" class="project-stats"></div>
                            </div>
                            <div class="project-links">
                                <a id="projectGithubLink" href="#" target="_blank" class="project-link">View on GitHub</a>
                            </div>
                        </div>
                        
                        <div class="commit-summary">
                            <div class="commit-stat">
                                <span id="totalCommits" class="commit-stat-number">0</span>
                                <span class="commit-stat-label">Total Commits</span>
                            </div>
                            <div class="commit-stat">
                                <span id="activeDays" class="commit-stat-number">0</span>
                                <span class="commit-stat-label">Active Days</span>
                            </div>
                            <div class="commit-stat">
                                <span id="avgCommitsPerDay" class="commit-stat-number">0</span>
                                <span class="commit-stat-label">Avg per Day</span>
                            </div>
                            <div class="commit-stat">
                                <span id="lastCommitDate" class="commit-stat-number">--</span>
                                <span class="commit-stat-label">Last Commit</span>
                            </div>
                        </div>
                        
                        <div class="chart-title">Python-Generated Commit Graph with Smoothened Curve</div>
                        <div id="chartArea">
                            <div class="loading-message">Select a project to view its commit timeline...</div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="contactContent" class="hidden">
                <div class="contact-description">
                    Feel free to connect with me on LinkedIn if you know me or want to get acquainted.
                </div>
                
                <form class="contact-form">
                    <div class="form-group">
                        <label class="form-label">Name</label>
                        <input type="text" class="form-input" placeholder="Name" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Email</label>
                        <input type="email" class="form-input" placeholder="Email Address" required>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">Message</label>
                        <textarea class="form-input form-textarea" placeholder="Message" required></textarea>
                    </div>
                    
                    <div class="form-description">
                        These fields allow you to send your contact information into my spreadsheet.
                    </div>
                    
                    <button type="submit" class="send-button">Send</button>
                </form>
                
                <div class="phone-message">
                    For fastest response time, just text or call my phone number! My number is 510-953-2104.
                </div>
                
                <div class="social-links">
                    <a href="https://github.com/5jayarama" class="social-link" target="_blank">
                        <img src="https://cdn-icons-png.flaticon.com/512/25/25231.png" alt="GitHub" class="social-icon">
                        <span class="social-label">GitHub</span>
                    </a>
                    
                    <a href="https://linkedin.com/in/adarshjayaram" class="social-link" target="_blank">
                        <img src="https://cdn-icons-png.flaticon.com/512/174/174857.png" alt="LinkedIn" class="social-icon">
                        <span class="social-label">LinkedIn</span>
                    </a>
                    
                    <a href="mailto:adarshjedi@gmail.com" class="social-link">
                        <img src="https://cdn-icons-png.flaticon.com/512/561/561127.png" alt="Email" class="social-icon">
                        <span class="social-label">Email</span>
                    </a>

                    <a href="static/AdarshJayaramResume.pdf" class="social-link" target="_blank">
                        <img src="https://cdn-icons-png.flaticon.com/512/3580/3580085.png" alt="Resume" class="social-icon">
                        <span class="social-label">Resume</span>
                    </a>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Theme toggle functionality
        const SUN_FILLED = `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-sun-fill" viewBox="0 0 16 16">
  <path d="M8 12a4 4 0 1 0 0-8 4 4 0 0 0 0 8M8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0m0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13m8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5M3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8m10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0m-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0m9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707M4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708"/>
</svg>`;
        const SUN_OUTLINE = `<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-sun" viewBox="0 0 16 16">
  <path d="M8 11a3 3 0 1 1 0-6 3 3 0 0 1 0 6m0 1a4 4 0 1 0 0-8 4 4 0 0 0 0 8M8 0a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 0m0 13a.5.5 0 0 1 .5.5v2a.5.5 0 0 1-1 0v-2A.5.5 0 0 1 8 13m8-5a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2a.5.5 0 0 1 .5.5M3 8a.5.5 0 0 1-.5.5h-2a.5.5 0 0 1 0-1h2A.5.5 0 0 1 3 8m10.657-5.657a.5.5 0 0 1 0 .707l-1.414 1.415a.5.5 0 1 1-.707-.708l1.414-1.414a.5.5 0 0 1 .707 0m-9.193 9.193a.5.5 0 0 1 0 .707L3.05 13.657a.5.5 0 0 1-.707-.707l1.414-1.414a.5.5 0 0 1 .707 0m9.193 2.121a.5.5 0 0 1-.707 0l-1.414-1.414a.5.5 0 0 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .707M4.464 4.465a.5.5 0 0 1-.707 0L2.343 3.05a.5.5 0 1 1 .707-.707l1.414 1.414a.5.5 0 0 1 0 .708"/>
</svg>`;

        // Initialize the theme toggle with default icon
        document.getElementById('themeToggle').innerHTML = SUN_OUTLINE;

        // Theme toggle functionality
        function toggleTheme() {
            document.body.classList.toggle('light-mode');
            const isLightMode = document.body.classList.contains('light-mode');
            
            document.getElementById('themeToggle').innerHTML = isLightMode ? SUN_FILLED : SUN_OUTLINE;
            localStorage.setItem('theme', isLightMode ? 'light' : 'dark');
        }

        // Add click handler
        document.getElementById('themeToggle').addEventListener('click', toggleTheme);

        // Load saved theme on page load
        const savedTheme = localStorage.getItem('theme');
        if (savedTheme === 'light') {
            document.body.classList.add('light-mode');
            document.getElementById('themeToggle').innerHTML = SUN_FILLED;
        }

        // Set initial active tab and background
        document.querySelector('.tab[data-page="Home"]').classList.add('active');
        document.body.classList.add('home-active');
        
        // Add click handlers to all tabs
        document.querySelectorAll('.tab').forEach(tab => {
            tab.addEventListener('click', function(e) {
                e.preventDefault();
                
                // Remove active class from all tabs
                document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                
                // Add active class to clicked tab
                this.classList.add('active');
                
                // update pagetitle
                const pageName = this.getAttribute('data-page');
                document.getElementById('pageTitle').textContent = pageName;
                
                // Manage background image for home page only
                if (pageName === 'Home') {
                    document.body.classList.add('home-active');
                } else {
                    document.body.classList.remove('home-active');
                }
                
                // Show/hide content based on active tab
                const skillsContent = document.getElementById('skillsContent');
                const contactContent = document.getElementById('contactContent');
                const aboutContent = document.getElementById('aboutContent');
                const projectsContent = document.getElementById('projectsContent');
                
                // Hide all content first
                skillsContent.classList.add('hidden');
                contactContent.classList.add('hidden');
                aboutContent.classList.add('hidden');
                projectsContent.classList.add('hidden');
                document.getElementById('homeContent').classList.add('hidden');
                
                // Show relevant content
                if (pageName === 'Skills') {
                    skillsContent.classList.remove('hidden');
                } else if (pageName === 'Contact Me') {
                    contactContent.classList.remove('hidden');
                } else if (pageName === 'About Me') {
                    aboutContent.classList.remove('hidden');
                } else if (pageName === 'Projects') {
                    projectsContent.classList.remove('hidden');
                    // Load Projects UI if not already loaded
                    if (!window.projectsUILoaded) {
                        loadGitHubData();
                        window.projectsUILoaded = true;
                    }
                } else if (pageName === 'Home') {
                    document.getElementById('homeContent').classList.remove('hidden');
                }
            });
        });
        
        // Add click handlers for skills to show/hide projects
        document.querySelectorAll('.skill-item').forEach(skill => {
            skill.addEventListener('click', function() {
                const projectsList = this.querySelector('.projects-list');
                projectsList.classList.toggle('expanded');
                
                // Populate GitHub projects if not already done
                if (projectsList.classList.contains('expanded') && !projectsList.dataset.populated) {
                    populateGitHubProjects(projectsList);
                    projectsList.dataset.populated = 'true';
                }
            });
        });

        // Add click handlers for manual projects
        document.addEventListener('click', function(e) {
            if (e.target.classList.contains('github-project-item')) {
                const repoUrl = e.target.dataset.url;
                if (repoUrl) {
                    window.open(repoUrl, '_blank');
                }
            }
        });

        // Function to populate GitHub projects in skills sections
        function populateGitHubProjects(projectsList) {
            const githubContainers = projectsList.querySelectorAll('.github-projects-container');
            
            githubContainers.forEach(container => {
                const language = container.dataset.language;
                container.innerHTML = '';
                
                if (repositoriesData && repositoriesData.length > 0) {
                    const matchingRepos = repositoriesData.filter(repo => {
                        return repo.language === language && repo.language !== null;
                    });
                    
                    if (matchingRepos.length > 0) {
                        matchingRepos.forEach(repo => {
                            const projectElement = document.createElement('div');
                            projectElement.className = 'github-project-item';
                            projectElement.dataset.url = repo.html_url;
                            projectElement.textContent = `• ${repo.name}`;
                            container.appendChild(projectElement);
                        });
                    }
                }
            });
        }

        // SIMPLIFIED: GitHub Data Management
        const GITHUB_USERNAME = '5jayarama';
        const FLASK_SERVER = window.location.origin;
        let repositoriesData = [];
        let selectedRepo = null;

        // Load repository data and display tabs WITH PRELOADING
        async function loadGitHubData() {
            try {
                document.getElementById('repoTabsContainer').innerHTML = '<div class="loading-message">Loading repositories...</div>';

                const response = await fetch(`${FLASK_SERVER}/api/repositories`);
                const data = await response.json();
                
                if (data.status === 'success') {
                    repositoriesData = data.repositories;
                    displayRepositoryTabs(repositoriesData);
                    console.log(`Loaded ${data.graphs_ready}/${data.total_repos} preloaded graphs`);
                    
                    // 🚀 PRELOAD IMAGES NOW (when page loads) - WAIT FOR COMPLETE LOADING
                    const hiddenContainer = document.createElement('div');
                    hiddenContainer.style.display = 'none';
                    hiddenContainer.id = 'preloadedGraphsContainer';
                    
                    let loadedCount = 0;
                    const totalImages = repositoriesData.filter(repo => repo.graph && repo.graph.ready).length;
                    
                    repositoriesData.forEach(repo => {
                        if (repo.graph && repo.graph.ready) {
                            const img = document.createElement('img');
                            img.dataset.repo = repo.name;
                            img.className = 'preloaded-graph';
                            
                            // WAIT FOR EACH IMAGE TO FULLY LOAD
                            img.onload = () => {
                                loadedCount++;
                                console.log(`✅ Loaded ${repo.name} (${loadedCount}/${totalImages})`);
                                if (loadedCount === totalImages) {
                                    console.log(`🎯 ALL ${totalImages} IMAGES FULLY PRELOADED - NOW INSTANT!`);
                                }
                            };
                            
                            img.onerror = () => {
                                console.warn(`❌ Failed to load ${repo.name}`);
                                loadedCount++; // Still count it to avoid hanging
                            };
                            
                            // Set src AFTER setting up handlers to ensure they trigger
                            img.src = `static/graphs/${repo.name}_commits.png`;
                            hiddenContainer.appendChild(img);
                        }
                    });
                    
                    document.body.appendChild(hiddenContainer);
                    console.log(`🖼️ Started preloading ${totalImages} graph images - waiting for complete downloads...`);
                    
                } else {
                    throw new Error(data.message || 'Failed to fetch repositories');
                }
            } catch (error) {
                console.error('Error loading GitHub data:', error);
                document.getElementById('repoTabsContainer').innerHTML = 
                    '<div class="error-message">Failed to load repository data.</div>';
            }
        }


        function displayRepositoryTabs(repositories) {
            const container = document.getElementById('repoTabsContainer');
            
            if (repositories.length === 0) {
                container.innerHTML = '<div class="error-message">No repositories found.</div>';
                return;
            }

            const tabsHTML = repositories.map((repo, index) => 
                `<div class="repo-tab" data-repo-index="${index}">${repo.name}</div>`
            ).join('');

            // 1. Show tabs immediately
            container.innerHTML = `<div class="repo-tabs">${tabsHTML}</div>`;

            // Add click handlers to tabs
            document.querySelectorAll('.repo-tab').forEach(tab => {
                tab.addEventListener('click', function() {
                    const repoIndex = parseInt(this.getAttribute('data-repo-index'));
                    selectRepository(repoIndex);
                });
            });

            // 2. IMMEDIATELY show first repository info and graph (no click needed)
            if (repositories.length > 0) {
                const firstRepo = repositories[0];
                selectedRepo = firstRepo;
                
                // Mark first tab as active
                document.querySelectorAll('.repo-tab')[0].classList.add('active');
                
                // Show project info section immediately
                document.getElementById('selectedProjectInfo').style.display = 'block';
                
                // Update project details immediately
                document.getElementById('projectName').textContent = firstRepo.name;
                document.getElementById('projectDescription').textContent = firstRepo.description || 'No description available';
                document.getElementById('projectGithubLink').href = firstRepo.html_url;

                // Update project stats immediately
                const statsHTML = [
                    `<div class="project-stat"><span>⭐</span><span>${firstRepo.stars}</span></div>`,
                    `<div class="project-stat"><span>🍴</span><span>${firstRepo.forks}</span></div>`,
                    firstRepo.language ? `<div class="project-stat"><span>📝</span><span>${firstRepo.language}</span></div>` : '',
                    `<div class="project-stat"><span>📅</span><span>${new Date(firstRepo.updated_at).toLocaleDateString()}</span></div>`
                ].filter(Boolean).join('');
                
                document.getElementById('projectStats').innerHTML = statsHTML;

                // 🚀 Display first graph IMMEDIATELY (no delay)
                if (firstRepo.graph && firstRepo.graph.ready) {
                    const stats = firstRepo.graph.stats;
                    
                    // Update commit summary immediately
                    document.getElementById('totalCommits').textContent = stats.total_commits;
                    document.getElementById('activeDays').textContent = stats.active_days;
                    document.getElementById('avgCommitsPerDay').textContent = stats.avg_commits_per_day;
                    
                    const dateRange = stats.date_range.split(' to ');
                    document.getElementById('lastCommitDate').textContent = dateRange[1] || 'N/A';

                    // Display graph immediately
                    const chartArea = document.getElementById('chartArea');
                    const timelineDays = stats.timeline_days;
                    const message = timelineDays < 5 
                        ? 'No LOWESS curve available for projects with very little history'
                        : 'This graph has been generated using Python seaborn with LOWESS smoothing';
                    
                    const ageInfo = firstRepo.graph.age_minutes ? ` (${firstRepo.graph.age_minutes}m old)` : '';
                    
                    chartArea.innerHTML = `
                        <div style="text-align: center;">
                            <img src="${firstRepo.graph.image_url}" 
                                 style="max-width: 100%; height: auto; border-radius: 8px; border: 2px solid #4299e1;">
                            <div style="margin-top: 15px; color: #a0aec0;">
                                <p>${message}${ageInfo}</p>
                                <p>Total: ${stats.total_commits} commits | Active: ${stats.active_days} days | Timeline: ${stats.timeline_days} days</p>
                            </div>
                        </div>
                    `;
                    
                    console.log(`⚡ First graph displayed immediately: ${firstRepo.name}`);
                }
            }

            // 3. 🚀 BACKGROUND PRELOAD: Silently cache all other graph images
            repositories.forEach((repo, index) => {
                if (index > 0 && repo.graph && repo.graph.ready) {
                    const img = new Image();
                    img.onload = () => console.log(`🖼️ Preloaded: ${repo.name}`);
                    img.src = repo.graph.image_url;
                }
            });
            
            console.log(`🚀 Background preloading ${repositories.length - 1} graph images...`);
        }

        // SIMPLIFIED: Select and display repository
        function selectRepository(repoIndex) {
            const repo = repositoriesData[repoIndex];
            if (!repo) return;

            selectedRepo = repo;

            // Update tab active state
            document.querySelectorAll('.repo-tab').forEach((tab, index) => {
                tab.classList.toggle('active', index === repoIndex);
            });

            // Show project info section
            document.getElementById('selectedProjectInfo').style.display = 'block';

            // Update project details
            document.getElementById('projectName').textContent = repo.name;
            document.getElementById('projectDescription').textContent = repo.description || 'No description available';
            document.getElementById('projectGithubLink').href = repo.html_url;

            // Update project stats
            const statsHTML = [
                `<div class="project-stat"><span>⭐</span><span>${repo.stars}</span></div>`,
                `<div class="project-stat"><span>🍴</span><span>${repo.forks}</span></div>`,
                repo.language ? `<div class="project-stat"><span>📝</span><span>${repo.language}</span></div>` : '',
                `<div class="project-stat"><span>📅</span><span>${new Date(repo.updated_at).toLocaleDateString()}</span></div>`
            ].filter(Boolean).join('');
            
            document.getElementById('projectStats').innerHTML = statsHTML;

            // Display graph using preloaded images
            if (repo.graph && repo.graph.ready) {
                const stats = repo.graph.stats;
                
                // Update commit summary
                document.getElementById('totalCommits').textContent = stats.total_commits;
                document.getElementById('activeDays').textContent = stats.active_days;
                document.getElementById('avgCommitsPerDay').textContent = stats.avg_commits_per_day;
                
                const dateRange = stats.date_range.split(' to ');
                document.getElementById('lastCommitDate').textContent = dateRange[1] || 'N/A';

                // Find the preloaded image (using data-repo attribute)
                const preloadedImg = document.querySelector(`img.preloaded-graph[data-repo="${repo.name}"]`);
                const chartArea = document.getElementById('chartArea');
                
                if (preloadedImg) {
                    // Clone the preloaded image for instant display
                    const imgClone = preloadedImg.cloneNode(true);
                    imgClone.style.display = 'block';
                    imgClone.style.borderRadius = '8px';
                    imgClone.style.border = '2px solid #4299e1';
                    imgClone.style.maxWidth = '100%';
                    imgClone.style.height = 'auto';
                    
                    const timelineDays = stats.timeline_days;
                    const message = timelineDays < 5 
                        ? 'No LOWESS curve available for projects with very little history'
                        : 'This graph has been generated using Python seaborn with LOWESS smoothing';
                    
                    const ageInfo = repo.graph.age_minutes ? ` (${repo.graph.age_minutes}m old)` : '';
                    
                    chartArea.innerHTML = `
                        <div style="text-align: center;">
                            <div style="margin-top: 15px; color: #a0aec0;">
                                <p>${message}${ageInfo}</p>
                                <p>Total: ${stats.total_commits} commits | Active: ${stats.active_days} days | Timeline: ${stats.timeline_days} days</p>
                            </div>
                        </div>
                    `;
                    
                    // Insert the preloaded image at the top for instant display
                    chartArea.firstElementChild.insertBefore(imgClone, chartArea.firstElementChild.firstChild);
                    
                } else {
                    console.warn(`⚠️ No preloaded image found for ${repo.name} - using fallback`);
                    
                    // Fallback to dynamic loading
                    const timelineDays = stats.timeline_days;
                    const message = timelineDays < 3 
                        ? 'No LOWESS curve available for projects with very little history'
                        : 'This graph has been generated using Python seaborn with LOWESS smoothing';
                    
                    const ageInfo = repo.graph.age_minutes ? ` (${repo.graph.age_minutes}m old)` : '';
                    
                    chartArea.innerHTML = `
                        <div style="text-align: center;">
                            <img src="${repo.graph.image_url}" 
                                style="max-width: 100%; height: auto; border-radius: 8px; border: 2px solid #4299e1;">
                            <div style="margin-top: 15px; color: #a0aec0;">
                                <p>${message}${ageInfo}</p>
                                <p>Total: ${stats.total_commits} commits | Active: ${stats.active_days} days | Timeline: ${stats.timeline_days} days</p>
                            </div>
                        </div>
                    `;
                }
            }
        }

        loadGitHubData();
    </script>
</body>
</html>